{"ast":null,"code":"import _classCallCheck from\"/Users/igahupalo/Pictures/GitHub/psp5_website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/igahupalo/Pictures/GitHub/psp5_website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/igahupalo/Pictures/GitHub/psp5_website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/igahupalo/Pictures/GitHub/psp5_website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Attachment from\"./Attachment\";import Moment from\"react-moment\";import\"moment/locale/pl\";import axios from\"axios\";export var Post=/*#__PURE__*/function(_Component){_inherits(Post,_Component);var _super=_createSuper(Post);function Post(){var _this;_classCallCheck(this,Post);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={imgUrl:'',isLoaded:false,isExpanded:false,excerptLength:150};return _this;}_createClass(Post,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var featured_media=this.props.post.featured_media;axios.get(\"/wp-json/wp/v2/media/\".concat(featured_media)).then(function(res){return _this2.setState({imgUrl:res.data.media_details.sizes.full.source_url,isLoaded:true,isExpanded:false});});}},{key:\"extendButtonClick\",value:function extendButtonClick(){this.setState({isExpanded:!this.state.isExpanded});}},{key:\"render\",value:function render(){var _this$props$post=this.props.post,title=_this$props$post.title,date=_this$props$post.date,content=_this$props$post.content,acf=_this$props$post.acf;var text=acf.text;var excerpt=text.substring(0,this.state.excerptLength)+\"...\";var _this$state=this.state,imgUrl=_this$state.imgUrl,isLoaded=_this$state.isLoaded,isExpanded=_this$state.isExpanded;var attachments=[acf.attachment1,acf.attachment2,acf.attachment3,acf.attachment4,acf.attachment5];var postNr=this.props.postNr;var postDirection=postNr%2;if(isLoaded){return/*#__PURE__*/React.createElement(\"div\",{className:\"post \"+(postDirection?\"post-left\":\"post-right\")},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:imgUrl,alt:title.rendered}),isExpanded?/*#__PURE__*/React.createElement(\"div\",null,attachments.map(function(att){if(att)return/*#__PURE__*/React.createElement(Attachment,{key:att.id,className:\"post-attachment\",title:att.title,url:att.url});})):\"\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"post-title\"},title.rendered),/*#__PURE__*/React.createElement(\"small\",{className:\"post-date\"},/*#__PURE__*/React.createElement(Moment,{locale:\"pl\",format:\"DD MMMM YYYYr. HH:mm\"},date)),/*#__PURE__*/React.createElement(\"p\",{className:\"post-text\",dangerouslySetInnerHTML:{__html:isExpanded?text:excerpt}}),/*#__PURE__*/React.createElement(\"button\",{className:\"post-button button-accent-2\",onClick:this.extendButtonClick.bind(this)},isExpanded?\"mniej\":\"więcej\")));}return null;}}]);return Post;}(Component);export default Post;","map":{"version":3,"sources":["/Users/igahupalo/Pictures/GitHub/psp5_website/frontend/src/components/elements/Post.js"],"names":["React","Component","Attachment","Moment","axios","Post","state","imgUrl","isLoaded","isExpanded","excerptLength","featured_media","props","post","get","then","res","setState","data","media_details","sizes","full","source_url","title","date","content","acf","text","excerpt","substring","attachments","attachment1","attachment2","attachment3","attachment4","attachment5","postNr","postDirection","rendered","map","att","id","url","__html","extendButtonClick","bind"],"mappings":"oqBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAO,kBAAP,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,UAAaC,CAAAA,IAAb,mTACIC,KADJ,CACY,CACJC,MAAM,CAAE,EADJ,CAEJC,QAAQ,CAAE,KAFN,CAGJC,UAAU,CAAE,KAHR,CAIJC,aAAa,CAAE,GAJX,CADZ,6FAawB,oBACTC,CAAAA,cADS,CACS,KAAKC,KAAL,CAAWC,IADpB,CACTF,cADS,CAEhBP,KAAK,CAACU,GAAN,gCAAkCH,cAAlC,GACKI,IADL,CACU,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,QAAL,CAAc,CACvBV,MAAM,CAAES,GAAG,CAACE,IAAJ,CAASC,aAAT,CAAuBC,KAAvB,CAA6BC,IAA7B,CAAkCC,UADnB,CAEvBd,QAAQ,CAAE,IAFa,CAGvBC,UAAU,CAAE,KAHW,CAAd,CAAJ,EADb,EAMH,CArBL,6DAuBuB,CACf,KAAKQ,QAAL,CAAc,CACVR,UAAU,CAAE,CAAC,KAAKH,KAAL,CAAWG,UADd,CAAd,EAGH,CA3BL,uCA6Ba,sBAC+B,KAAKG,KAAL,CAAWC,IAD1C,CACEU,KADF,kBACEA,KADF,CACSC,IADT,kBACSA,IADT,CACeC,OADf,kBACeA,OADf,CACwBC,GADxB,kBACwBA,GADxB,IAEEC,CAAAA,IAFF,CAEUD,GAFV,CAEEC,IAFF,CAGL,GAAMC,CAAAA,OAAO,CAAGD,IAAI,CAACE,SAAL,CAAe,CAAf,CAAkB,KAAKvB,KAAL,CAAWI,aAA7B,EAA4C,KAA5D,CAHK,gBAIkC,KAAKJ,KAJvC,CAIEC,MAJF,aAIEA,MAJF,CAIUC,QAJV,aAIUA,QAJV,CAIoBC,UAJpB,aAIoBA,UAJpB,CAKL,GAAMqB,CAAAA,WAAW,CAAG,CAChBJ,GAAG,CAACK,WADY,CAEhBL,GAAG,CAACM,WAFY,CAGhBN,GAAG,CAACO,WAHY,CAIhBP,GAAG,CAACQ,WAJY,CAKhBR,GAAG,CAACS,WALY,CAApB,CALK,GAaEC,CAAAA,MAbF,CAaY,KAAKxB,KAbjB,CAaEwB,MAbF,CAcL,GAAMC,CAAAA,aAAa,CAAGD,MAAM,CAAC,CAA7B,CAEA,GAAI5B,QAAJ,CAAa,CACT,mBACI,2BAAK,SAAS,CAAE,SAAW6B,aAAa,CAAG,WAAH,CAAiB,YAAzC,CAAhB,eACI,4CACI,2BAAK,GAAG,CAAE9B,MAAV,CAAkB,GAAG,CAAEgB,KAAK,CAACe,QAA7B,EADJ,CAEM7B,UAAU,cAAG,+BACTqB,WAAW,CAACS,GAAZ,CAAgB,SAAAC,GAAG,CAAI,CACrB,GAAIA,GAAJ,CAAS,mBAAO,oBAAC,UAAD,EAAY,GAAG,CAAEA,GAAG,CAACC,EAArB,CAAyB,SAAS,CAAE,iBAApC,CAAuD,KAAK,CAAED,GAAG,CAACjB,KAAlE,CAAyE,GAAG,CAAEiB,GAAG,CAACE,GAAlF,EAAP,CACZ,CAFC,CADS,CAAH,CAIH,EANb,CADJ,cASI,4CACI,0BAAI,SAAS,CAAE,YAAf,EAA8BnB,KAAK,CAACe,QAApC,CADJ,cAEI,6BAAO,SAAS,CAAE,WAAlB,eACI,oBAAC,MAAD,EAAQ,MAAM,CAAE,IAAhB,CAAsB,MAAM,CAAC,sBAA7B,EAAqDd,IAArD,CADJ,CAFJ,cAKI,yBAAG,SAAS,CAAE,WAAd,CAA2B,uBAAuB,CAAE,CAAEmB,MAAM,CAAElC,UAAU,CAAGkB,IAAH,CAAUC,OAA9B,CAApD,EALJ,cAMI,8BAAQ,SAAS,CAAE,6BAAnB,CACQ,OAAO,CAAE,KAAKgB,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CADjB,EACqDpC,UAAU,CAAG,OAAH,CAAa,QAD5E,CANJ,CATJ,CADJ,CAsBH,CACD,MAAO,KAAP,CACH,CAtEL,kBAA0BR,SAA1B,EAyEA,cAAeI,CAAAA,IAAf","sourcesContent":["import React, {Component} from \"react\";\nimport Attachment from \"./Attachment\"\n\nimport Moment from \"react-moment\";\nimport \"moment/locale/pl\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\n\nexport class Post extends Component {\n    state = {\n        imgUrl: '',\n        isLoaded: false,\n        isExpanded: false,\n        excerptLength: 150\n    }\n\n    static propTypes = {\n        post: PropTypes.object.isRequired,\n        postNr: PropTypes.number\n    }\n\n    componentDidMount() {\n        const {featured_media} = this.props.post;\n        axios.get(`/wp-json/wp/v2/media/${featured_media}`)\n            .then(res => this.setState({\n                imgUrl: res.data.media_details.sizes.full.source_url,\n                isLoaded: true,\n                isExpanded: false\n            }));\n    }\n\n    extendButtonClick(){\n        this.setState({\n            isExpanded: !this.state.isExpanded\n        });\n    }\n\n    render() {\n        const {title, date, content, acf} = this.props.post;\n        const {text} = acf;\n        const excerpt = text.substring(0, this.state.excerptLength)+\"...\";\n        const {imgUrl, isLoaded, isExpanded} = this.state;\n        const attachments = [\n            acf.attachment1,\n            acf.attachment2,\n            acf.attachment3,\n            acf.attachment4,\n            acf.attachment5\n        ];\n\n        const {postNr} = this.props;\n        const postDirection = postNr%2;\n\n        if (isLoaded){\n            return (\n                <div className={\"post \" + (postDirection ? \"post-left\" : \"post-right\")}>\n                    <div>\n                        <img src={imgUrl} alt={title.rendered}/>\n                        { isExpanded ? <div>\n                            { attachments.map(att => {\n                                if (att) return <Attachment key={att.id} className={\"post-attachment\"} title={att.title} url={att.url}/>\n                            })}\n                        </div> : \"\" }\n                    </div>\n                    <div>\n                        <h2 className={\"post-title\"}>{title.rendered}</h2>\n                        <small className={\"post-date\"}>\n                            <Moment locale={\"pl\"} format=\"DD MMMM YYYYr. HH:mm\">{date}</Moment>\n                        </small>\n                        <p className={\"post-text\"} dangerouslySetInnerHTML={{ __html: isExpanded ? text : excerpt}} />\n                        <button className={\"post-button button-accent-2\"}\n                                onClick={this.extendButtonClick.bind(this)}>{isExpanded ? \"mniej\" : \"więcej\"}\n                        </button>\n                    </div>\n                </div>\n            );\n        }\n        return null;\n    }\n}\n\nexport default Post;"]},"metadata":{},"sourceType":"module"}