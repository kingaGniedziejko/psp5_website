{"ast":null,"code":"var _jsxFileName = \"/Users/igahupalo/Pictures/GitHub/psp5_website/frontend/src/components/elements/Post.js\";\nimport React, { Component } from \"react\";\nimport Moment from 'react-moment';\nimport 'moment/locale/pl';\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nexport class Post extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      imgUrl: '',\n      isLoaded: false,\n      isExpanded: false,\n      excerptLength: 190\n    };\n  }\n\n  componentDidMount() {\n    const {\n      featured_media\n    } = this.props.post;\n    axios.get(`/wp-json/wp/v2/media/${featured_media}`).then(res => this.setState({\n      imgUrl: res.data.media_details.sizes.full.source_url,\n      isLoaded: true,\n      isExpanded: false\n    }));\n  }\n\n  extendButtonClick() {\n    this.setState({\n      isExpanded: !this.state.isExpanded\n    });\n  }\n\n  render() {\n    const {\n      title,\n      date,\n      content,\n      acf\n    } = this.props.post;\n    const {\n      postNr\n    } = this.props;\n    const excerpt = content.rendered.substring(0, this.state.excerptLength) + \"...\";\n    const {\n      imgUrl,\n      isLoaded,\n      isExpanded\n    } = this.state;\n    const attachments = [acf.attachment1, acf.attachment2, acf.attachment3, acf.attachment4, acf.attachment5];\n    const postDirection = postNr % 2;\n\n    if (isLoaded) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"post \" + (postDirection ? \"post-left\" : \"post-right\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: imgUrl,\n        alt: title.rendered,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }\n      }), isExpanded ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 42\n        }\n      }, isExpanded ? attachments.map(att => {\n        if (att) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            key: att.id,\n            className: \"post-attachment\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 53\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 57\n            }\n          }, att.title), /*#__PURE__*/React.createElement(\"a\", {\n            href: att.url,\n            rel: \"noopener noreferrer\",\n            target: \"_blank\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 57\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"attachment-download\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 121\n            }\n          })));\n        }\n      }) : \"\") : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"post-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, title.rendered), /*#__PURE__*/React.createElement(\"small\", {\n        className: \"post-date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Moment, {\n        locale: \"pl\",\n        format: \"DD MMMM YYYYr. HH:mm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 56\n        }\n      }, date)), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"post-text\",\n        dangerouslySetInnerHTML: {\n          __html: isExpanded ? content.rendered : excerpt\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"post-button button-accent-2\",\n        onClick: this.extendButtonClick.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }\n      }, isExpanded ? \"mniej\" : \"więcej\")));\n    }\n\n    return null;\n  }\n\n}\nPost.propTypes = {\n  post: PropTypes.object.isRequired,\n  postNr: PropTypes.number\n};\nexport default Post;","map":{"version":3,"sources":["/Users/igahupalo/Pictures/GitHub/psp5_website/frontend/src/components/elements/Post.js"],"names":["React","Component","Moment","PropTypes","axios","Post","state","imgUrl","isLoaded","isExpanded","excerptLength","componentDidMount","featured_media","props","post","get","then","res","setState","data","media_details","sizes","full","source_url","extendButtonClick","render","title","date","content","acf","postNr","excerpt","rendered","substring","attachments","attachment1","attachment2","attachment3","attachment4","attachment5","postDirection","map","att","id","url","__html","bind","propTypes","object","isRequired","number"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport Moment from 'react-moment';\nimport 'moment/locale/pl';\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\n\nexport class Post extends Component {\n    state = {\n        imgUrl: '',\n        isLoaded: false,\n        isExpanded: false,\n        excerptLength: 190\n    }\n\n    static propTypes = {\n        post: PropTypes.object.isRequired,\n        postNr: PropTypes.number\n    }\n\n    componentDidMount() {\n        const {featured_media} = this.props.post;\n        axios.get(`/wp-json/wp/v2/media/${featured_media}`)\n            .then(res => this.setState({\n                imgUrl: res.data.media_details.sizes.full.source_url,\n                isLoaded: true,\n                isExpanded: false\n            }));\n    }\n\n    extendButtonClick(){\n        this.setState({\n            isExpanded: !this.state.isExpanded\n        });\n    }\n\n    render() {\n        const {title, date, content, acf} = this.props.post;\n        const {postNr} = this.props;\n        const excerpt = content.rendered.substring(0, this.state.excerptLength)+\"...\";\n        const {imgUrl, isLoaded, isExpanded} = this.state;\n        const attachments = [\n            acf.attachment1,\n            acf.attachment2,\n            acf.attachment3,\n            acf.attachment4,\n            acf.attachment5\n        ];\n        const postDirection = postNr%2;\n\n        if (isLoaded){\n            return (\n                <div className={\"post \" + (postDirection ? \"post-left\" : \"post-right\")}>\n                    <div>\n                        <img src={imgUrl} alt={title.rendered}/>\n                        {\n                            isExpanded ? <div>\n                                {\n                                    isExpanded ?\n                                        attachments.map(att => {\n                                            if (att){\n                                                return (\n                                                    <div key={att.id} className={\"post-attachment\"}>\n                                                        <p>{att.title}</p>\n                                                        <a href={att.url} rel={\"noopener noreferrer\"} target={\"_blank\"}><div className={\"attachment-download\"}/></a>\n                                                    </div>\n                                                )\n                                            }\n                                        })\n                                        : \"\"\n                                }\n                            </div> : \"\"\n                        }\n                    </div>\n                    <div>\n                        <h2 className={\"post-title\"}>{title.rendered}</h2>\n                        <small className={\"post-date\"}><Moment locale={\"pl\"} format=\"DD MMMM YYYYr. HH:mm\">{date}</Moment></small>\n                        <p className={\"post-text\"} dangerouslySetInnerHTML={{ __html: isExpanded ? content.rendered : excerpt}} />\n                        <button className={\"post-button button-accent-2\"} onClick={this.extendButtonClick.bind(this)}>{isExpanded ? \"mniej\" : \"więcej\"}</button>\n                    </div>\n                </div>\n            );\n        }\n        return null;\n    }\n}\n\nexport default Post;"]},"metadata":{},"sourceType":"module"}